zfs:all:
  do: exec
  desc: show all zfs info
  command: |
    sudo -v
    eval printf %.0s= '{1..'"${COLUMNS:-$(tput cols)}"\}
    sudo zpool status
    eval printf %.0s= '{1..'"${COLUMNS:-$(tput cols)}"\}
    sudo zpool iostat
    eval printf %.0s= '{1..'"${COLUMNS:-$(tput cols)}"\}
    sudo zpool list
    eval printf %.0s= '{1..'"${COLUMNS:-$(tput cols)}"\}
    sudo zfs list
zfs:im:
  do: exec
  desc: import a ZFS pool.
  command: |
    if [[ $(uname) == Darwin ]]; then base=/var/run; else base=/dev; fi &&
    sudo zpool import -f -d $base/disk/by-id <<name(RAIDZ2TB,RAIDZ4TB,RAIDZ9TB,RAIDZ12TB)>> && sudo zpool status
zfs:ex:
  do: exec
  desc: export a ZFS pool.
  command: sudo zpool export <<name(RAIDZ2TB,RAIDZ4TB,RAIDZ9TB,RAIDZ12TB)>> && sudo zpool status
zfs:arc:
  do: exec
  desc: show arc. stats.
  command: cat /proc/spl/kstat/zfs/arcstats
zfs:ls:
  do: exec
  desc: list ZFS snapshots.
  command: sudo zfs list -t snapshot
zfs:ss:
  do: exec
  desc: create ZFS snapshots.
  command: sudo zfs snapshot <<name>>
zfs:show:compress:
  do: exec
  desc: get compression stats.
  command: sudo zfs get compression -r
zfs:sdrc:
  do: exec
  desc: ZFS send and receive. Double check how snapshot should be specified.
  command: sudo zfs send <<input(RAIDZ2TB,RAIDZ4TB,RAIDZ9TB,RAIDZ12TB)>>/@<<snapshot>> | sudo zfs receive <<output(RAIDZ2TB,RAIDZ4TB,RAIDZ9TB,RAIDZ12TB)>>/
zfs:version:
  do: exec
  desc: check zfs version
  command: if [[ $(uname) == Darwin ]]; then sysctl -a | grep -E '(zfs|spl)\.kext'; else dmesg | grep ZFS; fi
zfs:space:
  do: exec
  desc: show zfs space usage, sort by snapshot usage
  command: zfs list -o space | sort -hk4
zfs:size:
  do: exec
  desc: show zfs dataset sizes in bytes
  command: zfs get -o name,value -Hp used
